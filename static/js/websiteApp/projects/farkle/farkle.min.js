const i=[];for(const e of document.getElementsByClassName("dice")){i.push({element:e,value:1})}for(const o of i){o.element.addEventListener("click",e=>{o.value++;o.value%=7;o.element.src=`/static/img/dice/dice-${o.value}.svg`;s()});o.element.addEventListener("contextmenu",e=>{e.preventDefault();o.value+=6;o.value%=7;o.element.src=`/static/img/dice/dice-${o.value}.svg`;s()})}const m=[{dice:[1,0,0,0,0,0],score:100,msg:"a one"},{dice:[0,0,0,0,1,0],score:50,msg:"a five"},{dice:[3,0,0,0,0,0],score:300,msg:"3 ones"},{dice:[0,3,0,0,0,0],score:200,msg:"3 twos"},{dice:[0,0,3,0,0,0],score:300,msg:"3 threes"},{dice:[0,0,0,3,0,0],score:400,msg:"3 fours"},{dice:[0,0,0,0,3,0],score:500,msg:"3 fives"},{dice:[0,0,0,0,0,3],score:600,msg:"3 sixes"},{dice:[4,0,0,0,0,0],score:1e3,msg:"4 ones"},{dice:[0,4,0,0,0,0],score:1e3,msg:"4 twos"},{dice:[0,0,4,0,0,0],score:1e3,msg:"4 threes"},{dice:[0,0,0,4,0,0],score:1e3,msg:"4 fours"},{dice:[0,0,0,0,4,0],score:1e3,msg:"4 fives"},{dice:[0,0,0,0,0,4],score:1e3,msg:"4 sixes"},{dice:[5,0,0,0,0,0],score:2e3,msg:"5 ones"},{dice:[0,5,0,0,0,0],score:2e3,msg:"5 twos"},{dice:[0,0,5,0,0,0],score:2e3,msg:"5 threes"},{dice:[0,0,0,5,0,0],score:2e3,msg:"5 fours"},{dice:[0,0,0,0,5,0],score:2e3,msg:"5 fives"},{dice:[0,0,0,0,0,5],score:2e3,msg:"5 sixes"},{dice:[6,0,0,0,0,0],score:3e3,msg:"6 ones"},{dice:[0,6,0,0,0,0],score:3e3,msg:"6 twos"},{dice:[0,0,6,0,0,0],score:3e3,msg:"6 threes"},{dice:[0,0,0,6,0,0],score:3e3,msg:"6 fours"},{dice:[0,0,0,0,6,0],score:3e3,msg:"6 fives"},{dice:[0,0,0,0,0,6],score:3e3,msg:"6 sixes"},{dice:[1,1,1,1,1,1],score:1500,msg:"a straight of 1-6"},{dice:[2,2,2,0,0,0],score:1500,msg:"2 ones, 2 twos and 2 threes"},{dice:[2,2,0,2,0,0],score:1500,msg:"2 ones, 2 twos and 2 fours"},{dice:[2,2,0,0,2,0],score:1500,msg:"2 ones, 2 twos and 2 fives"},{dice:[2,2,0,0,0,2],score:1500,msg:"2 ones, 2 twos and 2 sixes"},{dice:[2,0,2,2,0,0],score:1500,msg:"2 ones, 2 threes and 2 fours"},{dice:[2,0,2,0,2,0],score:1500,msg:"2 ones, 2 threes and 2 fives"},{dice:[2,0,2,0,0,2],score:1500,msg:"2 ones, 2 threes and 2 sixes"},{dice:[2,0,0,2,2,0],score:1500,msg:"2 ones, 2 fours and 2 fives"},{dice:[2,0,0,2,0,2],score:1500,msg:"2 ones, 2 fours and 2 sixes"},{dice:[2,0,0,0,2,2],score:1500,msg:"2 ones, 2 fives and 2 sixes"},{dice:[0,2,2,2,0,0],score:1500,msg:"2 twos, 2 threes and 2 fours"},{dice:[0,2,2,0,2,0],score:1500,msg:"2 twos, 2 threes and 2 fives"},{dice:[0,2,2,0,0,2],score:1500,msg:"2 twos, 2 threes and 2 sixes"},{dice:[0,2,0,2,2,0],score:1500,msg:"2 twos, 2 fours and 2 fives"},{dice:[0,2,0,2,0,2],score:1500,msg:"2 twos, 2 fours and 2 sixes"},{dice:[0,2,0,0,2,2],score:1500,msg:"2 twos, 2 fives and 2 sixes"},{dice:[0,0,2,2,2,0],score:1500,msg:"2 threes, 2 fours and 2 fives"},{dice:[0,0,2,2,0,2],score:1500,msg:"2 threes, 2 fours and 2 sixes"},{dice:[0,0,2,0,2,2],score:1500,msg:"2 threes, 2 fives and 2 sixes"},{dice:[0,0,0,2,2,2],score:1500,msg:"2 fours, 2 fives and 2 sixes"},{dice:[4,2,0,0,0,0],score:1500,msg:"4 ones and 2 twos"},{dice:[4,0,2,0,0,0],score:1500,msg:"4 ones and 2 threes"},{dice:[4,0,0,2,0,0],score:1500,msg:"4 ones and 2 fours"},{dice:[4,0,0,0,2,0],score:1500,msg:"4 ones and 2 fives"},{dice:[4,0,0,0,0,2],score:1500,msg:"4 ones and 2 sixes"},{dice:[2,4,0,0,0,0],score:1500,msg:"4 twos and 2 ones"},{dice:[0,4,2,0,0,0],score:1500,msg:"4 twos and 2 threes"},{dice:[0,4,0,2,0,0],score:1500,msg:"4 twos and 2 fours"},{dice:[0,4,0,0,2,0],score:1500,msg:"4 twos and 2 fives"},{dice:[0,4,0,0,0,2],score:1500,msg:"4 twos and 2 sixes"},{dice:[2,0,4,0,0,0],score:1500,msg:"4 threes and 2 ones"},{dice:[0,2,4,0,0,0],score:1500,msg:"4 threes and 2 twos"},{dice:[0,0,4,2,0,0],score:1500,msg:"4 threes and 2 fours"},{dice:[0,0,4,0,2,0],score:1500,msg:"4 threes and 2 fives"},{dice:[0,0,4,0,0,2],score:1500,msg:"4 threes and 2 sixes"},{dice:[2,0,0,4,0,0],score:1500,msg:"4 fours and 2 ones"},{dice:[0,2,0,4,0,0],score:1500,msg:"4 fours and 2 twos"},{dice:[0,0,2,4,0,0],score:1500,msg:"4 fours and 2 threes"},{dice:[0,0,0,4,2,0],score:1500,msg:"4 fours and 2 fives"},{dice:[0,0,0,4,0,2],score:1500,msg:"4 fours and 2 sixes"},{dice:[2,0,0,0,4,0],score:1500,msg:"4 fives and 2 ones"},{dice:[0,2,0,0,4,0],score:1500,msg:"4 fives and 2 twos"},{dice:[0,0,2,0,4,0],score:1500,msg:"4 fives and 2 threes"},{dice:[0,0,0,2,4,0],score:1500,msg:"4 fives and 2 fours"},{dice:[0,0,0,0,4,2],score:1500,msg:"4 fives and 2 sixes"},{dice:[2,0,0,0,0,4],score:1500,msg:"4 sixes and 2 ones"},{dice:[0,2,0,0,0,4],score:1500,msg:"4 sixes and 2 twos"},{dice:[0,0,2,0,0,4],score:1500,msg:"4 sixes and 2 threes"},{dice:[0,0,0,2,0,4],score:1500,msg:"4 sixes and 2 fours"},{dice:[0,0,0,0,2,4],score:1500,msg:"4 sixes and 2 fives"},{dice:[3,3,0,0,0,0],score:2500,msg:"3 ones and 3 twos"},{dice:[3,0,3,0,0,0],score:2500,msg:"3 ones and 3 threes"},{dice:[3,0,0,3,0,0],score:2500,msg:"3 ones and 3 fours"},{dice:[3,0,0,0,3,0],score:2500,msg:"3 ones and 3 fives"},{dice:[3,0,0,0,0,3],score:2500,msg:"3 ones and 3 sixes"},{dice:[0,3,3,0,0,0],score:2500,msg:"3 twos and 3 threes"},{dice:[0,3,0,3,0,0],score:2500,msg:"3 twos and 3 fours"},{dice:[0,3,0,0,3,0],score:2500,msg:"3 twos and 3 fives"},{dice:[0,3,0,0,0,3],score:2500,msg:"3 twos and 3 sixes"},{dice:[0,0,3,3,0,0],score:2500,msg:"3 threes and 3 fours"},{dice:[0,0,3,0,3,0],score:2500,msg:"3 threes and 3 fives"},{dice:[0,0,3,0,0,3],score:2500,msg:"3 threes and 3 sixes"},{dice:[0,0,0,3,3,0],score:2500,msg:"3 fours and 3 fives"},{dice:[0,0,0,3,0,3],score:2500,msg:"3 fours and 3 sixes"},{dice:[0,0,0,0,3,3],score:2500,msg:"3 fives and 3 sixes"}];const a=(s,o)=>{for(let e=0;e<6;e++){if(s[e]<o.dice[e])return false}return true};const f=(e,s,o,c,r)=>{let i=s.reduce((e,s)=>{return e+s},0);if(i===0)i=6;e.push({score:c,moves:o,diceLeft:i,diceUsed:r});for(const n of m){if(a(s,n)){const d=[...s];const t=[...o];t.push(n.msg);const g=[...r];for(let e=0;e<6;e++){d[e]-=n.dice[e];g[e]+=n.dice[e]}f(e,d,t,c+n.score,g)}}};const n=(e,s)=>{const o=[];f(o,e,[],s,[0,0,0,0,0,0]);return o};const d=e=>{switch(e.diceLeft){case 1:if(e.score<300)return 1.13361*e.score-3.353;else return e.score;case 2:if(e.score<250)return 1.16192*e.score-15.43057;else return e.score;case 3:if(e.score<450)return.69828*e.score+120.27386;else return e.score;case 4:if(e.score<1050)return.81633*e.score+180.15206;else return e.score;case 5:return.84692*e.score+305.43795;case 6:return.89449*e.score+534.98335}};const t=document.getElementById("moveAdvise");const g=document.getElementById("current-score");const u=document.getElementById("gettingOnBoard");const s=()=>{const s=[0,0,0,0,0,0];for(const e of i){if(e.value!==0){s[e.value-1]++}}console.log(`Roll: ${s}`);const e=n(s,parseInt(g.innerText));e.shift();console.log(`Found ${e.length} score options`);if(e.length===0){for(const e of i)e.element.src=`/static/img/dice/dice-${e.value}-red.svg`;t.innerText="This is a farkle!";return}let o=e[0];let c=d(o);console.log(`First score option: ${o.diceUsed} value: ${c}`);for(const r of e){if(d(r)>c){o=r;c=d(o);console.log(`New best score option: ${o.diceUsed} value: ${c}`)}}t.innerHTML="Keep ";t.innerHTML+=o.moves.join(", ");t.innerHTML+=` for <strong>${o.score} points</strong>`;t.innerHTML+=`<br>Expected score for this turn: ${c.toFixed(3)}`;if(c>o.score||u.checked&&o.score<500){t.innerHTML+="<br>Keep rolling!";if(o.diceLeft===6){t.innerHTML+=" <strong>Hot dice!</strong>"}}else{t.innerHTML+="<br>Stop rolling"}for(const e of i)e.element.src=`/static/img/dice/dice-${e.value}.svg`;console.log(`Going to set these to green: ${o.diceUsed}`);for(let s=0;s<6;s++){for(let e=0;e<o.diceUsed[s];e++){for(const e of i){if(e.value===s+1&&e.element.src.endsWith(`dice-${e.value}.svg`)){e.element.src=`/static/img/dice/dice-${e.value}-green.svg`;break}}}}};u.addEventListener("change",s);document.getElementById("plus-button").addEventListener("click",()=>{g.innerText=String(parseInt(g.innerText)+50);s()});document.getElementById("minus-button").addEventListener("click",()=>{if(parseInt(g.innerText)>0){g.innerText=String(parseInt(g.innerText)-50);s()}});s();