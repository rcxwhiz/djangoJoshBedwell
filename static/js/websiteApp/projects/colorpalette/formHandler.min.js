const e=document.getElementById("form");const t=document.querySelectorAll(".needs-validation");const a="https://www.joshbedwell.com/projects/colorpalette/";const o=document.getElementById("imagePlaceHolder");const s=document.getElementById("imageDestination");Array.prototype.slice.call(t).forEach(e=>{e.addEventListener("submit",n=>{n.preventDefault();n.stopPropagation();if(!e.checkValidity()){e.classList.add("was-validated")}else{o.classList.add("p-5");o.innerHTML="Generating image...<br>This will take a moment for larger images";document.getElementById("imageDestination").innerHTML="";let t=new XMLHttpRequest;t.open("POST",a,true);t.onload=e=>{if(t.status===200){o.innerHTML="";o.classList.remove("p-5");let e=document.createElement("img");e.src="data:image/png;base64,"+t.responseText;e.classList.add("mb-4");e.classList.add("img-fluid");e.style.maxHeight="80vh";s.appendChild(e)}else{o.innerHTML=`<strong style="color: red;">Error ${t.status} occurred generating image - image was probably too big</strong>`}};let e=new FormData(document.forms.namedItem("imageForm"));if(!document.getElementById("whiten").checked){e.append("whiten","off")}if(!document.getElementById("showText").checked){e.append("show_text","off")}if(!document.getElementById("full").checked){e.append("full_set","off")}t.send(e);n.preventDefault()}},false)});